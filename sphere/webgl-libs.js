WebGLUtils=function(){var t=function(t){return'<div style="margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;">'+t+"</div>"},a='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',r='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org">Click here for more information.</a>',n=function(n,e,i){function u(n){var o=document.getElementsByTagName("body")[0];if(o){var e=window.WebGLRenderingContext?r:a;n&&(e+="<br/><br/>Status: "+n),o.innerHTML=t(e)}}i=i||u,n.addEventListener&&n.addEventListener("webglcontextcreationerror",function(t){i(t.statusMessage)},!1);var l=o(n,e);return l||i(window.WebGLRenderingContext?"":""),l},o=function(t,a){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,o=0;o<r.length;++o){try{n=t.getContext(r[o],a)}catch(t){}if(n)break}return n};return{create3DContext:o,setupWebGL:n}}(),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,a){window.setTimeout(t,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout),!function(t,a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var r=a();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function a(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}var r={};return a.m=t,a.c=r,a.p="",a(0)}([function(t,a,r){a.glMatrix=r(1),a.mat2=r(2),a.mat2d=r(3),a.mat3=r(4),a.mat4=r(5),a.quat=r(6),a.vec2=r(9),a.vec3=r(7),a.vec4=r(8)},function(t,a){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,a){return Math.abs(t-a)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=r},function(t,a,r){var n=r(1),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},o.fromValues=function(t,a,r,o){var e=new n.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=o,e},o.set=function(t,a,r,n,o){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t},o.transpose=function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},o.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=r*e-o*n;return i?(i=1/i,t[0]=e*i,t[1]=-n*i,t[2]=-o*i,t[3]=r*i,t):null},o.adjoint=function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},o.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},o.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=r[0],l=r[1],s=r[2],M=r[3];return t[0]=n*u+e*l,t[1]=o*u+i*l,t[2]=n*s+e*M,t[3]=o*s+i*M,t},o.mul=o.multiply,o.rotate=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+e*u,t[1]=o*l+i*u,t[2]=n*-u+e*l,t[3]=o*-u+i*l,t},o.scale=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=r[0],l=r[1];return t[0]=n*u,t[1]=o*u,t[2]=e*l,t[3]=i*l,t},o.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},o.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},o.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},o.sub=o.subtract,o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],i=t[3],u=a[0],l=a[1],s=a[2],M=a[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(e-s)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(i-M)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))},o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},t.exports=o},function(t,a,r){var n=r(1),o={};o.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},o.fromValues=function(t,a,r,o,e,i){var u=new n.ARRAY_TYPE(6);return u[0]=t,u[1]=a,u[2]=r,u[3]=o,u[4]=e,u[5]=i,u},o.set=function(t,a,r,n,o,e,i){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=i,t},o.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=a[4],u=a[5],l=r*e-n*o;return l?(l=1/l,t[0]=e*l,t[1]=-n*l,t[2]=-o*l,t[3]=r*l,t[4]=(o*u-e*i)*l,t[5]=(n*i-r*u)*l,t):null},o.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},o.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=r[0],M=r[1],c=r[2],f=r[3],h=r[4],m=r[5];return t[0]=n*s+e*M,t[1]=o*s+i*M,t[2]=n*c+e*f,t[3]=o*c+i*f,t[4]=n*h+e*m+u,t[5]=o*h+i*m+l,t},o.mul=o.multiply,o.rotate=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=Math.sin(r),M=Math.cos(r);return t[0]=n*M+e*s,t[1]=o*M+i*s,t[2]=n*-s+e*M,t[3]=o*-s+i*M,t[4]=u,t[5]=l,t},o.scale=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=r[0],M=r[1];return t[0]=n*s,t[1]=o*s,t[2]=e*M,t[3]=i*M,t[4]=u,t[5]=l,t},o.translate=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=r[0],M=r[1];return t[0]=n,t[1]=o,t[2]=e,t[3]=i,t[4]=n*s+e*M+u,t[5]=o*s+i*M+l,t},o.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},o.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],i=t[3],u=t[4],l=t[5],s=a[0],M=a[1],c=a[2],f=a[3],h=a[4],m=a[5];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-M)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(e-c)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-h)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(l-m)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))},t.exports=o},function(t,a,r){var n=r(1),o={};o.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},o.clone=function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},o.fromValues=function(t,a,r,o,e,i,u,l,s){var M=new n.ARRAY_TYPE(9);return M[0]=t,M[1]=a,M[2]=r,M[3]=o,M[4]=e,M[5]=i,M[6]=u,M[7]=l,M[8]=s,M},o.set=function(t,a,r,n,o,e,i,u,l,s){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],o=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=o}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},o.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=a[4],u=a[5],l=a[6],s=a[7],M=a[8],c=M*i-u*s,f=-M*e+u*l,h=s*e-i*l,m=r*c+n*f+o*h;return m?(m=1/m,t[0]=c*m,t[1]=(-M*n+o*s)*m,t[2]=(u*n-o*i)*m,t[3]=f*m,t[4]=(M*r-o*l)*m,t[5]=(-u*r+o*e)*m,t[6]=h*m,t[7]=(-s*r+n*l)*m,t[8]=(i*r-n*e)*m,t):null},o.adjoint=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=a[4],u=a[5],l=a[6],s=a[7],M=a[8];return t[0]=i*M-u*s,t[1]=o*s-n*M,t[2]=n*u-o*i,t[3]=u*l-e*M,t[4]=r*M-o*l,t[5]=o*e-r*u,t[6]=e*s-i*l,t[7]=n*l-r*s,t[8]=r*i-n*e,t},o.determinant=function(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return a*(s*e-i*l)+r*(-s*o+i*u)+n*(l*o-e*u)},o.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=a[6],M=a[7],c=a[8],f=r[0],h=r[1],m=r[2],x=r[3],S=r[4],I=r[5],d=r[6],D=r[7],F=r[8];return t[0]=f*n+h*i+m*s,t[1]=f*o+h*u+m*M,t[2]=f*e+h*l+m*c,t[3]=x*n+S*i+I*s,t[4]=x*o+S*u+I*M,t[5]=x*e+S*l+I*c,t[6]=d*n+D*i+F*s,t[7]=d*o+D*u+F*M,t[8]=d*e+D*l+F*c,t},o.mul=o.multiply,o.translate=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=a[6],M=a[7],c=a[8],f=r[0],h=r[1];return t[0]=n,t[1]=o,t[2]=e,t[3]=i,t[4]=u,t[5]=l,t[6]=f*n+h*i+s,t[7]=f*o+h*u+M,t[8]=f*e+h*l+c,t},o.rotate=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=a[6],M=a[7],c=a[8],f=Math.sin(r),h=Math.cos(r);return t[0]=h*n+f*i,t[1]=h*o+f*u,t[2]=h*e+f*l,t[3]=h*i-f*n,t[4]=h*u-f*o,t[5]=h*l-f*e,t[6]=s,t[7]=M,t[8]=c,t},o.scale=function(t,a,r){var n=r[0],o=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=o*a[3],t[4]=o*a[4],t[5]=o*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},o.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},o.fromQuat=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=r+r,u=n+n,l=o+o,s=r*i,M=n*i,c=n*u,f=o*i,h=o*u,m=o*l,x=e*i,S=e*u,I=e*l;return t[0]=1-c-m,t[3]=M-I,t[6]=f+S,t[1]=M+I,t[4]=1-s-m,t[7]=h-x,t[2]=f-S,t[5]=h+x,t[8]=1-s-c,t},o.normalFromMat4=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=a[4],u=a[5],l=a[6],s=a[7],M=a[8],c=a[9],f=a[10],h=a[11],m=a[12],x=a[13],S=a[14],I=a[15],d=r*u-n*i,D=r*l-o*i,F=r*s-e*i,v=n*l-o*u,b=n*s-e*u,p=o*s-e*l,w=M*x-c*m,A=M*S-f*m,E=M*I-h*m,g=c*S-f*x,R=c*I-h*x,z=f*I-h*S,L=d*z-D*R+F*g+v*E-b*A+p*w;return L?(L=1/L,t[0]=(u*z-l*R+s*g)*L,t[1]=(l*E-i*z-s*A)*L,t[2]=(i*R-u*E+s*w)*L,t[3]=(o*R-n*z-e*g)*L,t[4]=(r*z-o*E+e*A)*L,t[5]=(n*E-r*R-e*w)*L,t[6]=(x*p-S*b+I*v)*L,t[7]=(S*F-m*p-I*D)*L,t[8]=(m*b-x*F+I*d)*L,t):null},o.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],i=t[3],u=t[4],l=t[5],s=t[6],M=t[7],c=t[8],f=a[0],h=a[1],m=a[2],x=a[3],S=a[4],I=a[5],d=t[6],D=a[7],F=a[8];return Math.abs(r-f)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-h)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(e-m)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(i-x)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-S)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-I)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(M-D)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(D))&&Math.abs(c-F)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))},t.exports=o},function(t,a,r){var n=r(1),o={scalar:{},SIMD:{}};o.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.clone=function(t){var a=new n.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.fromValues=function(t,a,r,o,e,i,u,l,s,M,c,f,h,m,x,S){var I=new n.ARRAY_TYPE(16);return I[0]=t,I[1]=a,I[2]=r,I[3]=o,I[4]=e,I[5]=i,I[6]=u,I[7]=l,I[8]=s,I[9]=M,I[10]=c,I[11]=f,I[12]=h,I[13]=m,I[14]=x,I[15]=S,I},o.set=function(t,a,r,n,o,e,i,u,l,s,M,c,f,h,m,x,S){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=M,t[10]=c,t[11]=f,t[12]=h,t[13]=m,t[14]=x,t[15]=S,t},o.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],o=a[3],e=a[6],i=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=e,t[11]=a[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},o.SIMD.transpose=function(t,a){var r,n,o,e,i,u,l,s,M,c;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(o,e,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(o,e,2,3,6,7),M=SIMD.Float32x4.shuffle(i,u,0,2,4,6),c=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,c),t},o.transpose=n.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=a[4],u=a[5],l=a[6],s=a[7],M=a[8],c=a[9],f=a[10],h=a[11],m=a[12],x=a[13],S=a[14],I=a[15],d=r*u-n*i,D=r*l-o*i,F=r*s-e*i,v=n*l-o*u,b=n*s-e*u,p=o*s-e*l,w=M*x-c*m,A=M*S-f*m,E=M*I-h*m,g=c*S-f*x,R=c*I-h*x,z=f*I-h*S,L=d*z-D*R+F*g+v*E-b*A+p*w;return L?(L=1/L,t[0]=(u*z-l*R+s*g)*L,t[1]=(o*R-n*z-e*g)*L,t[2]=(x*p-S*b+I*v)*L,t[3]=(f*b-c*p-h*v)*L,t[4]=(l*E-i*z-s*A)*L,t[5]=(r*z-o*E+e*A)*L,t[6]=(S*F-m*p-I*D)*L,t[7]=(M*p-f*F+h*D)*L,t[8]=(i*R-u*E+s*w)*L,t[9]=(n*E-r*R-e*w)*L,t[10]=(m*b-x*F+I*d)*L,t[11]=(c*F-M*b-h*d)*L,t[12]=(u*A-i*g-l*w)*L,t[13]=(r*g-n*A+o*w)*L,t[14]=(x*D-m*v-S*d)*L,t[15]=(M*v-c*D+f*d)*L,t):null},o.SIMD.invert=function(t,a){var r,n,o,e,i,u,l,s,M,c,f=SIMD.Float32x4.load(a,0),h=SIMD.Float32x4.load(a,4),m=SIMD.Float32x4.load(a,8),x=SIMD.Float32x4.load(a,12);return i=SIMD.Float32x4.shuffle(f,h,0,1,4,5),n=SIMD.Float32x4.shuffle(m,x,0,1,4,5),r=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,h,2,3,6,7),e=SIMD.Float32x4.shuffle(m,x,2,3,6,7),o=SIMD.Float32x4.shuffle(i,e,0,2,4,6),e=SIMD.Float32x4.shuffle(e,i,1,3,5,7),i=SIMD.Float32x4.mul(o,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(n,i),l=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),u),M=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,i)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),s),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),M),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),s),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.mul(r,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),l),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,i)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),M),c=SIMD.Float32x4.mul(r,u),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,M)),t):null},o.invert=n.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=a[4],u=a[5],l=a[6],s=a[7],M=a[8],c=a[9],f=a[10],h=a[11],m=a[12],x=a[13],S=a[14],I=a[15];return t[0]=u*(f*I-h*S)-c*(l*I-s*S)+x*(l*h-s*f),t[1]=-(n*(f*I-h*S)-c*(o*I-e*S)+x*(o*h-e*f)),t[2]=n*(l*I-s*S)-u*(o*I-e*S)+x*(o*s-e*l),t[3]=-(n*(l*h-s*f)-u*(o*h-e*f)+c*(o*s-e*l)),t[4]=-(i*(f*I-h*S)-M*(l*I-s*S)+m*(l*h-s*f)),t[5]=r*(f*I-h*S)-M*(o*I-e*S)+m*(o*h-e*f),t[6]=-(r*(l*I-s*S)-i*(o*I-e*S)+m*(o*s-e*l)),t[7]=r*(l*h-s*f)-i*(o*h-e*f)+M*(o*s-e*l),t[8]=i*(c*I-h*x)-M*(u*I-s*x)+m*(u*h-s*c),t[9]=-(r*(c*I-h*x)-M*(n*I-e*x)+m*(n*h-e*c)),t[10]=r*(u*I-s*x)-i*(n*I-e*x)+m*(n*s-e*u),t[11]=-(r*(u*h-s*c)-i*(n*h-e*c)+M*(n*s-e*u)),t[12]=-(i*(c*S-f*x)-M*(u*S-l*x)+m*(u*f-l*c)),t[13]=r*(c*S-f*x)-M*(n*S-o*x)+m*(n*f-o*c),t[14]=-(r*(u*S-l*x)-i*(n*S-o*x)+m*(n*l-o*u)),t[15]=r*(u*f-l*c)-i*(n*f-o*c)+M*(n*l-o*u),t},o.SIMD.adjoint=function(t,a){var r,n,o,e,i,u,l,s,M,c,f,h,m,r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),e=SIMD.Float32x4.load(a,12);return M=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(o,e,0,1,4,5),i=SIMD.Float32x4.shuffle(M,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,M,1,3,5,7),M=SIMD.Float32x4.shuffle(r,n,2,3,6,7),s=SIMD.Float32x4.shuffle(o,e,2,3,6,7),l=SIMD.Float32x4.shuffle(M,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,M,1,3,5,7),M=SIMD.Float32x4.mul(l,s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),c=SIMD.Float32x4.mul(u,M),f=SIMD.Float32x4.mul(i,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,M),c),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,M),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),M=SIMD.Float32x4.mul(u,l),M=SIMD.Float32x4.swizzle(M,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),c),m=SIMD.Float32x4.mul(i,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,M)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,M),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),M=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),c),h=SIMD.Float32x4.mul(i,M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,M)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,M),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),M=SIMD.Float32x4.mul(i,u),M=SIMD.Float32x4.swizzle(M,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),h),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,M),m),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,M),h),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,M)),M=SIMD.Float32x4.mul(i,s),M=SIMD.Float32x4.swizzle(M,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,M)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,M),h),M=SIMD.Float32x4.swizzle(M,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,M),f),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,M)),M=SIMD.Float32x4.mul(i,l),M=SIMD.Float32x4.swizzle(M,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,M),f),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(u,M)),M=SIMD.Float32x4.swizzle(M,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,M)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,M),m),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,m),t},o.adjoint=n.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],i=t[5],u=t[6],l=t[7],s=t[8],M=t[9],c=t[10],f=t[11],h=t[12],m=t[13],x=t[14],S=t[15],I=a*i-r*e,d=a*u-n*e,D=a*l-o*e,F=r*u-n*i,v=r*l-o*i,b=n*l-o*u,p=s*m-M*h,w=s*x-c*h,A=s*S-f*h,E=M*x-c*m,g=M*S-f*m,R=c*S-f*x;return I*R-d*g+D*E+F*A-v*w+b*p},o.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),o=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(r,4),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,M);var c=SIMD.Float32x4.load(r,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var h=SIMD.Float32x4.load(r,12),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,m),t},o.scalar.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=a[6],M=a[7],c=a[8],f=a[9],h=a[10],m=a[11],x=a[12],S=a[13],I=a[14],d=a[15],D=r[0],F=r[1],v=r[2],b=r[3];return t[0]=D*n+F*u+v*c+b*x,t[1]=D*o+F*l+v*f+b*S,t[2]=D*e+F*s+v*h+b*I,t[3]=D*i+F*M+v*m+b*d,D=r[4],F=r[5],v=r[6],b=r[7],t[4]=D*n+F*u+v*c+b*x,t[5]=D*o+F*l+v*f+b*S,t[6]=D*e+F*s+v*h+b*I,t[7]=D*i+F*M+v*m+b*d,D=r[8],F=r[9],v=r[10],b=r[11],t[8]=D*n+F*u+v*c+b*x,t[9]=D*o+F*l+v*f+b*S,t[10]=D*e+F*s+v*h+b*I,t[11]=D*i+F*M+v*m+b*d,D=r[12],F=r[13],v=r[14],b=r[15],t[12]=D*n+F*u+v*c+b*x,t[13]=D*o+F*l+v*f+b*S,t[14]=D*e+F*s+v*h+b*I,t[15]=D*i+F*M+v*m+b*d,t},o.multiply=n.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(t,a,r){var n,o,e,i,u,l,s,M,c,f,h,m,x=r[0],S=r[1],I=r[2];return a===t?(t[12]=a[0]*x+a[4]*S+a[8]*I+a[12],t[13]=a[1]*x+a[5]*S+a[9]*I+a[13],t[14]=a[2]*x+a[6]*S+a[10]*I+a[14],t[15]=a[3]*x+a[7]*S+a[11]*I+a[15]):(n=a[0],o=a[1],e=a[2],i=a[3],u=a[4],l=a[5],s=a[6],M=a[7],c=a[8],f=a[9],h=a[10],m=a[11],t[0]=n,t[1]=o,t[2]=e,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=M,t[8]=c,t[9]=f,t[10]=h,t[11]=m,t[12]=n*x+u*S+c*I+a[12],t[13]=o*x+l*S+f*I+a[13],t[14]=e*x+s*S+h*I+a[14],t[15]=i*x+M*S+m*I+a[15]),t},o.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),o=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,SIMD.Float32x4.add(e,i)));return SIMD.Float32x4.store(t,12,l),t},o.translate=n.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(t,a,r){var n=r[0],o=r[1],e=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=a[7]*o,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.SIMD.scale=function(t,a,r){var n,o,e,i=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),o=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1))),e=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},o.scale=n.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(t,a,r,o){var e,i,u,l,s,M,c,f,h,m,x,S,I,d,D,F,v,b,p,w,A,E,g,R,z=o[0],L=o[1],P=o[2],T=Math.sqrt(z*z+L*L+P*P);return Math.abs(T)<n.EPSILON?null:(T=1/T,z*=T,L*=T,P*=T,e=Math.sin(r),i=Math.cos(r),u=1-i,l=a[0],s=a[1],M=a[2],c=a[3],f=a[4],h=a[5],m=a[6],x=a[7],S=a[8],I=a[9],d=a[10],D=a[11],F=z*z*u+i,v=L*z*u+P*e,b=P*z*u-L*e,p=z*L*u-P*e,w=L*L*u+i,A=P*L*u+z*e,E=z*P*u+L*e,g=L*P*u-z*e,R=P*P*u+i,t[0]=l*F+f*v+S*b,t[1]=s*F+h*v+I*b,t[2]=M*F+m*v+d*b,t[3]=c*F+x*v+D*b,t[4]=l*p+f*w+S*A,t[5]=s*p+h*w+I*A,t[6]=M*p+m*w+d*A,t[7]=c*p+x*w+D*A,t[8]=l*E+f*g+S*R,t[9]=s*E+h*g+I*R,t[10]=M*E+m*g+d*R,t[11]=c*E+x*g+D*R,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},o.scalar.rotateX=function(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[4],i=a[5],u=a[6],l=a[7],s=a[8],M=a[9],c=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*o+s*n,t[5]=i*o+M*n,t[6]=u*o+c*n,t[7]=l*o+f*n,t[8]=s*o-e*n,t[9]=M*o-i*n,t[10]=c*o-u*n,t[11]=f*o-l*n,t},o.SIMD.rotateX=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),o=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,4),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(e,n))),t},o.rotateX=n.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],i=a[1],u=a[2],l=a[3],s=a[8],M=a[9],c=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o-s*n,t[1]=i*o-M*n,t[2]=u*o-c*n,t[3]=l*o-f*n,t[8]=e*n+s*o,t[9]=i*n+M*o,t[10]=u*n+c*o,t[11]=l*n+f*o,t},o.SIMD.rotateY=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),o=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,n),SIMD.Float32x4.mul(i,o))),t},o.rotateY=n.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],i=a[1],u=a[2],l=a[3],s=a[4],M=a[5],c=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o+s*n,t[1]=i*o+M*n,t[2]=u*o+c*n,t[3]=l*o+f*n,t[4]=s*o-e*n,t[5]=M*o-i*n,t[6]=c*o-u*n,t[7]=f*o-l*n,t},o.SIMD.rotateZ=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),o=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var e=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(e,o),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(e,n))),t},o.rotateZ=n.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},o.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,a,r){var o,e,i,u=r[0],l=r[1],s=r[2],M=Math.sqrt(u*u+l*l+s*s);return Math.abs(M)<n.EPSILON?null:(M=1/M,u*=M,l*=M,s*=M,o=Math.sin(a),e=Math.cos(a),i=1-e,t[0]=u*u*i+e,t[1]=l*u*i+s*o,t[2]=s*u*i-l*o,t[3]=0,t[4]=u*l*i-s*o,t[5]=l*l*i+e,t[6]=s*l*i+u*o,t[7]=0,t[8]=u*s*i+l*o,t[9]=l*s*i-u*o,t[10]=s*s*i+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},o.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromYRotation=function(t,a){
var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotationTranslation=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=n+n,l=o+o,s=e+e,M=n*u,c=n*l,f=n*s,h=o*l,m=o*s,x=e*s,S=i*u,I=i*l,d=i*s;return t[0]=1-(h+x),t[1]=c+d,t[2]=f-I,t[3]=0,t[4]=c-d,t[5]=1-(M+x),t[6]=m+S,t[7]=0,t[8]=f+I,t[9]=m-S,t[10]=1-(M+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},o.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},o.getRotation=function(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t},o.fromRotationTranslationScale=function(t,a,r,n){var o=a[0],e=a[1],i=a[2],u=a[3],l=o+o,s=e+e,M=i+i,c=o*l,f=o*s,h=o*M,m=e*s,x=e*M,S=i*M,I=u*l,d=u*s,D=u*M,F=n[0],v=n[1],b=n[2];return t[0]=(1-(m+S))*F,t[1]=(f+D)*F,t[2]=(h-d)*F,t[3]=0,t[4]=(f-D)*v,t[5]=(1-(c+S))*v,t[6]=(x+I)*v,t[7]=0,t[8]=(h+d)*b,t[9]=(x-I)*b,t[10]=(1-(c+m))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},o.fromRotationTranslationScaleOrigin=function(t,a,r,n,o){var e=a[0],i=a[1],u=a[2],l=a[3],s=e+e,M=i+i,c=u+u,f=e*s,h=e*M,m=e*c,x=i*M,S=i*c,I=u*c,d=l*s,D=l*M,F=l*c,v=n[0],b=n[1],p=n[2],w=o[0],A=o[1],E=o[2];return t[0]=(1-(x+I))*v,t[1]=(h+F)*v,t[2]=(m-D)*v,t[3]=0,t[4]=(h-F)*b,t[5]=(1-(f+I))*b,t[6]=(S+d)*b,t[7]=0,t[8]=(m+D)*p,t[9]=(S-d)*p,t[10]=(1-(f+x))*p,t[11]=0,t[12]=r[0]+w-(t[0]*w+t[4]*A+t[8]*E),t[13]=r[1]+A-(t[1]*w+t[5]*A+t[9]*E),t[14]=r[2]+E-(t[2]*w+t[6]*A+t[10]*E),t[15]=1,t},o.fromQuat=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=r+r,u=n+n,l=o+o,s=r*i,M=n*i,c=n*u,f=o*i,h=o*u,m=o*l,x=e*i,S=e*u,I=e*l;return t[0]=1-c-m,t[1]=M+I,t[2]=f-S,t[3]=0,t[4]=M-I,t[5]=1-s-m,t[6]=h+x,t[7]=0,t[8]=f+S,t[9]=h-x,t[10]=1-s-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.frustum=function(t,a,r,n,o,e,i){var u=1/(r-a),l=1/(o-n),s=1/(e-i);return t[0]=2*e*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*l,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(o+n)*l,t[10]=(i+e)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*e*2*s,t[15]=0,t},o.perspective=function(t,a,r,n,o){var e=1/Math.tan(a/2),i=1/(n-o);return t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*n*i,t[15]=0,t},o.perspectiveFromFieldOfView=function(t,a,r,n){var o=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),i=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(o+e);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-u)*l*.5),t[9]=(o-e)*s*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},o.ortho=function(t,a,r,n,o,e,i){var u=1/(a-r),l=1/(n-o),s=1/(e-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(a+r)*u,t[13]=(o+n)*l,t[14]=(i+e)*s,t[15]=1,t},o.lookAt=function(t,a,r,e){var i,u,l,s,M,c,f,h,m,x,S=a[0],I=a[1],d=a[2],D=e[0],F=e[1],v=e[2],b=r[0],p=r[1],w=r[2];return Math.abs(S-b)<n.EPSILON&&Math.abs(I-p)<n.EPSILON&&Math.abs(d-w)<n.EPSILON?o.identity(t):(f=S-b,h=I-p,m=d-w,x=1/Math.sqrt(f*f+h*h+m*m),f*=x,h*=x,m*=x,i=F*m-v*h,u=v*f-D*m,l=D*h-F*f,x=Math.sqrt(i*i+u*u+l*l),x?(x=1/x,i*=x,u*=x,l*=x):(i=0,u=0,l=0),s=h*l-m*u,M=m*i-f*l,c=f*u-h*i,x=Math.sqrt(s*s+M*M+c*c),x?(x=1/x,s*=x,M*=x,c*=x):(s=0,M=0,c=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=u,t[5]=M,t[6]=h,t[7]=0,t[8]=l,t[9]=c,t[10]=m,t[11]=0,t[12]=-(i*S+u*I+l*d),t[13]=-(s*S+M*I+c*d),t[14]=-(f*S+h*I+m*d),t[15]=1,t)},o.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},o.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t},o.sub=o.subtract,o.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t},o.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],i=t[3],u=t[4],l=t[5],s=t[6],M=t[7],c=t[8],f=t[9],h=t[10],m=t[11],x=t[12],S=t[13],I=t[14],d=t[15],D=a[0],F=a[1],v=a[2],b=a[3],p=a[4],w=a[5],A=a[6],E=a[7],g=a[8],R=a[9],z=a[10],L=a[11],P=a[12],T=a[13],_=a[14],y=a[15];return Math.abs(r-D)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(D))&&Math.abs(o-F)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(e-v)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(i-b)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-p)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(l-w)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(s-A)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(M-E)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(E))&&Math.abs(c-g)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-R)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(h-z)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(m-L)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(x-P)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(S-T)<=n.EPSILON*Math.max(1,Math.abs(S),Math.abs(T))&&Math.abs(I-_)<=n.EPSILON*Math.max(1,Math.abs(I),Math.abs(_))&&Math.abs(d-y)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))},t.exports=o},function(t,a,r){var n=r(1),o=r(4),e=r(7),i=r(8),u={};u.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=e.create(),a=e.fromValues(1,0,0),r=e.fromValues(0,1,0);return function(n,o,i){var l=e.dot(o,i);return-.999999>l?(e.cross(t,a,o),e.length(t)<1e-6&&e.cross(t,r,o),e.normalize(t,t),u.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(e.cross(t,o,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,u.normalize(n,n))}}(),u.setAxes=function(){var t=o.create();return function(a,r,n,o){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],u.normalize(a,u.fromMat3(a,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,a,r){r=.5*r;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},u.getAxisAngle=function(t,a){var r=2*Math.acos(a[3]),n=Math.sin(r/2);return 0!=n?(t[0]=a[0]/n,t[1]=a[1]/n,t[2]=a[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},u.add=i.add,u.multiply=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3],u=r[0],l=r[1],s=r[2],M=r[3];return t[0]=n*M+i*u+o*s-e*l,t[1]=o*M+i*l+e*u-n*s,t[2]=e*M+i*s+n*l-o*u,t[3]=i*M-n*u-o*l-e*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,a,r){r*=.5;var n=a[0],o=a[1],e=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*u,t[1]=o*l+e*u,t[2]=e*l-o*u,t[3]=i*l-n*u,t},u.rotateY=function(t,a,r){r*=.5;var n=a[0],o=a[1],e=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l-e*u,t[1]=o*l+i*u,t[2]=e*l+n*u,t[3]=i*l-o*u,t},u.rotateZ=function(t,a,r){r*=.5;var n=a[0],o=a[1],e=a[2],i=a[3],u=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*u,t[1]=o*l-n*u,t[2]=e*l+i*u,t[3]=i*l-e*u,t},u.calculateW=function(t,a){var r=a[0],n=a[1],o=a[2];return t[0]=r,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,a,r,n){var o,e,i,u,l,s=a[0],M=a[1],c=a[2],f=a[3],h=r[0],m=r[1],x=r[2],S=r[3];return e=s*h+M*m+c*x+f*S,0>e&&(e=-e,h=-h,m=-m,x=-x,S=-S),1-e>1e-6?(o=Math.acos(e),i=Math.sin(o),u=Math.sin((1-n)*o)/i,l=Math.sin(n*o)/i):(u=1-n,l=n),t[0]=u*s+l*h,t[1]=u*M+l*m,t[2]=u*c+l*x,t[3]=u*f+l*S,t},u.sqlerp=function(){var t=u.create(),a=u.create();return function(r,n,o,e,i,l){return u.slerp(t,n,i,l),u.slerp(a,o,e,l),u.slerp(r,t,a,2*l*(1-l)),r}}(),u.invert=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=r*r+n*n+o*o+e*e,u=i?1/i:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t},u.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var o=0;a[4]>a[0]&&(o=1),a[8]>a[3*o+o]&&(o=2);var e=(o+1)%3,i=(o+2)%3;r=Math.sqrt(a[3*o+o]-a[3*e+e]-a[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(a[3*e+i]-a[3*i+e])*r,t[e]=(a[3*e+o]+a[3*o+e])*r,t[i]=(a[3*i+o]+a[3*o+i])*r}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,a,r){var n=r(1),o={};o.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},o.fromValues=function(t,a,r){var o=new n.ARRAY_TYPE(3);return o[0]=t,o[1]=a,o[2]=r,o},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},o.set=function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},o.sub=o.subtract,o.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},o.mul=o.multiply,o.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},o.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},o.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},o.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},o.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},o.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2];return Math.sqrt(r*r+n*n+o*o)},o.dist=o.distance,o.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2];return r*r+n*n+o*o},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},o.len=o.length,o.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},o.normalize=function(t,a){var r=a[0],n=a[1],o=a[2],e=r*r+n*n+o*o;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},o.cross=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=r[0],u=r[1],l=r[2];return t[0]=o*l-e*u,t[1]=e*i-n*l,t[2]=n*u-o*i,t},o.lerp=function(t,a,r,n){var o=a[0],e=a[1],i=a[2];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t[2]=i+n*(r[2]-i),t},o.hermite=function(t,a,r,n,o,e){var i=e*e,u=i*(2*e-3)+1,l=i*(e-2)+e,s=i*(e-1),M=i*(3-2*e);return t[0]=a[0]*u+r[0]*l+n[0]*s+o[0]*M,t[1]=a[1]*u+r[1]*l+n[1]*s+o[1]*M,t[2]=a[2]*u+r[2]*l+n[2]*s+o[2]*M,t},o.bezier=function(t,a,r,n,o,e){var i=1-e,u=i*i,l=e*e,s=u*i,M=3*e*u,c=3*l*i,f=l*e;return t[0]=a[0]*s+r[0]*M+n[0]*c+o[0]*f,t[1]=a[1]*s+r[1]*M+n[1]*c+o[1]*f,t[2]=a[2]*s+r[2]*M+n[2]*c+o[2]*f,t},o.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,e=Math.sqrt(1-o*o)*a;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t[2]=o*a,t},o.transformMat4=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=r[3]*n+r[7]*o+r[11]*e+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*o+r[8]*e+r[12])/i,t[1]=(r[1]*n+r[5]*o+r[9]*e+r[13])/i,t[2]=(r[2]*n+r[6]*o+r[10]*e+r[14])/i,t},o.transformMat3=function(t,a,r){var n=a[0],o=a[1],e=a[2];return t[0]=n*r[0]+o*r[3]+e*r[6],t[1]=n*r[1]+o*r[4]+e*r[7],t[2]=n*r[2]+o*r[5]+e*r[8],t},o.transformQuat=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=r[0],u=r[1],l=r[2],s=r[3],M=s*n+u*e-l*o,c=s*o+l*n-i*e,f=s*e+i*o-u*n,h=-i*n-u*o-l*e;return t[0]=M*s+h*-i+c*-l-f*-u,t[1]=c*s+h*-u+f*-i-M*-l,t[2]=f*s+h*-l+M*-u-c*-i,t},o.rotateX=function(t,a,r,n){var o=[],e=[];return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],e[0]=o[0],e[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),e[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.rotateY=function(t,a,r,n){var o=[],e=[];return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],e[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),e[1]=o[1],e[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.rotateZ=function(t,a,r,n){var o=[],e=[];return o[0]=a[0]-r[0],o[1]=a[1]-r[1],o[2]=a[2]-r[2],e[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),e[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),e[2]=o[2],t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.forEach=function(){var t=o.create();return function(a,r,n,o,e,i){var u,l;for(r||(r=3),n||(n=0),l=o?Math.min(o*r+n,a.length):a.length,u=n;l>u;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],e(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2];return a}}(),o.angle=function(t,a){var r=o.fromValues(t[0],t[1],t[2]),n=o.fromValues(a[0],a[1],a[2]);o.normalize(r,r),o.normalize(n,n);var e=o.dot(r,n);return e>1?0:Math.acos(e)},o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],i=a[0],u=a[1],l=a[2];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))},t.exports=o},function(t,a,r){var n=r(1),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},o.fromValues=function(t,a,r,o){var e=new n.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=o,e},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},o.set=function(t,a,r,n,o){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},o.sub=o.subtract,o.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},o.mul=o.multiply,o.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},o.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},o.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},o.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},o.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},o.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2],e=a[3]-t[3];return Math.sqrt(r*r+n*n+o*o+e*e)},o.dist=o.distance,o.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],o=a[2]-t[2],e=a[3]-t[3];return r*r+n*n+o*o+e*e},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],r=t[1],n=t[2],o=t[3];return Math.sqrt(a*a+r*r+n*n+o*o)},o.len=o.length,o.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],o=t[3];return a*a+r*r+n*n+o*o},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},o.normalize=function(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],i=r*r+n*n+o*o+e*e;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=n*i,t[2]=o*i,t[3]=e*i),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},o.lerp=function(t,a,r,n){var o=a[0],e=a[1],i=a[2],u=a[3];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t[2]=i+n*(r[2]-i),t[3]=u+n*(r[3]-u),t},o.random=function(t,a){return a=a||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),o.normalize(t,t),o.scale(t,t,a),t},o.transformMat4=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=a[3];return t[0]=r[0]*n+r[4]*o+r[8]*e+r[12]*i,t[1]=r[1]*n+r[5]*o+r[9]*e+r[13]*i,t[2]=r[2]*n+r[6]*o+r[10]*e+r[14]*i,t[3]=r[3]*n+r[7]*o+r[11]*e+r[15]*i,t},o.transformQuat=function(t,a,r){var n=a[0],o=a[1],e=a[2],i=r[0],u=r[1],l=r[2],s=r[3],M=s*n+u*e-l*o,c=s*o+l*n-i*e,f=s*e+i*o-u*n,h=-i*n-u*o-l*e;return t[0]=M*s+h*-i+c*-l-f*-u,t[1]=c*s+h*-u+f*-i-M*-l,t[2]=f*s+h*-l+M*-u-c*-i,t[3]=a[3],t},o.forEach=function(){var t=o.create();return function(a,r,n,o,e,i){var u,l;for(r||(r=4),n||(n=0),l=o?Math.min(o*r+n,a.length):a.length,u=n;l>u;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],e(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2],a[u+3]=t[3];return a}}(),o.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},o.equals=function(t,a){var r=t[0],o=t[1],e=t[2],i=t[3],u=a[0],l=a[1],s=a[2],M=a[3];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(e-s)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(i-M)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))},t.exports=o},function(t,a,r){var n=r(1),o={};o.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},o.fromValues=function(t,a){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},o.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},o.set=function(t,a,r){return t[0]=a,t[1]=r,t},o.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},o.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},o.sub=o.subtract,o.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},o.mul=o.multiply,o.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},o.div=o.divide,o.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},o.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},o.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},o.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},o.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},o.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},o.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},o.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},o.dist=o.distance,o.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},o.sqrDist=o.squaredDistance,o.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},o.len=o.length,o.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},o.sqrLen=o.squaredLength,o.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},o.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},o.normalize=function(t,a){var r=a[0],n=a[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o),t},o.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},o.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},o.lerp=function(t,a,r,n){var o=a[0],e=a[1];return t[0]=o+n*(r[0]-o),t[1]=e+n*(r[1]-e),t},o.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},o.transformMat2=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t},o.transformMat2d=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t},o.transformMat3=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t},o.transformMat4=function(t,a,r){var n=a[0],o=a[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t},o.forEach=function(){var t=o.create();return function(a,r,n,o,e,i){var u,l;for(r||(r=2),n||(n=0),l=o?Math.min(o*r+n,a.length):a.length,u=n;l>u;u+=r)t[0]=a[u],t[1]=a[u+1],e(t,t,i),a[u]=t[0],a[u+1]=t[1];return a}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},o.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},o.equals=function(t,a){var r=t[0],o=t[1],e=a[0],i=a[1];return Math.abs(r-e)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(o-i)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))},t.exports=o}])});var Camera=function(){function t(t,a,r,n,o,e,i){this.eye=t,this.center=a,this.up=r,this.fov=n,this.aspect=o,this.near=e,this.far=i,this.worldToCamera=mat4.create(),mat4.lookAt(this.worldToCamera,this.eye,this.center,this.up),this.cameraToWorld=mat4.create(),mat4.invert(this.cameraToWorld,this.worldToCamera),this.cameraToClip=mat4.create(),mat4.perspective(this.cameraToClip,this.fov,this.aspect,this.near,this.far),this.clipToCamera=mat4.create(),mat4.invert(this.clipToCamera,this.cameraToClip)}return t}(),Light=function(){function t(t,a,r,n){this.position=t,this.ambient=a,this.diffuse=r,this.specular=n}return t}(),Material=function(){function t(t,a,r,n,o,e){this.ambient=a,this.diffuse=r,this.specular=n,this.shine=o,this.buildTexture(t,e)}return t.prototype.buildTexture=function(t,a){this.texture=t.createTexture(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},t}(),Shader=function(){function t(t,a,r,n,o,e){var i=this.createProgram(t,a,r);return i?(t.useProgram(i),t.program=i,this.setPosition(t,e),this.setNormal(t,e),this.setTextureCoords(t,e),this.activateTexture(t,e.material),this.setUniformsSampler(t),this.setUniformsModelViewMatrix(t,e,o),this.setUniformsNormalMatrix(t),this.setUniformsProjectionMatrix(t,o),this.setUniformsModelViewProjectionMatrix(t,o),this.setUniformsLights(t,n),void this.setUniformsMaterials(t,e)):void console.log("Shader.ts: constructor: Failed to create program: ",i)}return t.prototype.draw=function(t,a){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.indicesBuffer),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.drawElements(t.TRIANGLES,a.indicesCount,t.UNSIGNED_SHORT,0)},t.prototype.createProgram=function(t,a,r){var n=this.loadShader(t,t.VERTEX_SHADER,a),o=this.loadShader(t,t.FRAGMENT_SHADER,r);if(!n||!o)return console.log("Shader.ts: createProgram: No vertex shader or fragment shader: ",n,", ",o),null;var e=t.createProgram();if(!e)return console.log("Shader.ts: createProgram: No program: ",e),null;t.attachShader(e,n),t.attachShader(e,o),t.linkProgram(e);var i=t.getProgramParameter(e,t.LINK_STATUS);if(!i){var u=t.getProgramInfoLog(e);return console.log("Shader.ts: createProgram: Failed to link program: "+u),t.deleteProgram(e),t.deleteShader(o),t.deleteShader(n),null}return e},t.prototype.loadShader=function(t,a,r){var n=t.createShader(a);if(null==n)return console.log("Shader.ts: loadShader: shader === null."),null;t.shaderSource(n,r),t.compileShader(n);var o=t.getShaderParameter(n,t.COMPILE_STATUS);if(!o){var e=t.getShaderInfoLog(n);return console.log("Shader.ts: loadShader: Failed to compile shader: "+e),t.deleteShader(n),null}return n},t.prototype.setPosition=function(t,a){t.bindBuffer(t.ARRAY_BUFFER,a.positionsBuffer);var r=t.getAttribLocation(t.program,"a_Position");t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)},t.prototype.setNormal=function(t,a){t.bindBuffer(t.ARRAY_BUFFER,a.normalsBuffer);var r=t.getAttribLocation(t.program,"a_Normal");t.vertexAttribPointer(r,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)},t.prototype.setTextureCoords=function(t,a){t.bindBuffer(t.ARRAY_BUFFER,a.textureCoordsBuffer);var r=t.getAttribLocation(t.program,"a_TexCoord");t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)},t.prototype.activateTexture=function(t,a){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture)},t.prototype.setUniformsSampler=function(t){var a=t.getUniformLocation(t.program,"u_Sampler");t.uniform1i(a,0)},t.prototype.setUniformsModelViewMatrix=function(t,a,r){this.modelViewMatrix=mat4.create(),mat4.multiply(this.modelViewMatrix,r.worldToCamera,a.modelToWorld);var n=t.getUniformLocation(t.program,"u_ModelViewMatrix");t.uniformMatrix4fv(n,!1,this.modelViewMatrix);var o=mat4.create();mat4.invert(o,this.modelViewMatrix);var e=t.getUniformLocation(t.program,"u_ModelViewMatrixInverse");t.uniformMatrix4fv(e,!1,o)},t.prototype.setUniformsNormalMatrix=function(t){var a=mat3.create();mat3.normalFromMat4(a,this.modelViewMatrix);var r=t.getUniformLocation(t.program,"u_NormalMatrix");t.uniformMatrix3fv(r,!1,a)},t.prototype.setUniformsProjectionMatrix=function(t,a){var r=t.getUniformLocation(t.program,"u_ProjectionMatrix");t.uniformMatrix4fv(r,!1,a.cameraToClip);var n=t.getUniformLocation(t.program,"u_ProjectionMatrixInverse");t.uniformMatrix4fv(n,!1,a.clipToCamera)},t.prototype.setUniformsModelViewProjectionMatrix=function(t,a){var r=mat4.create();mat4.multiply(r,a.cameraToClip,this.modelViewMatrix);var n=t.getUniformLocation(t.program,"u_ModelViewProjectionMatrix");t.uniformMatrix4fv(n,!1,r);var o=mat4.create();mat4.invert(o,r);var e=t.getUniformLocation(t.program,"u_ModelViewProjectionMatrixInverse");t.uniformMatrix4fv(e,!1,o)},t.prototype.setUniformsLights=function(t,a){if(a){if(a.position){var r=t.getUniformLocation(t.program,"u_Light.position");t.uniform4fv(r,a.position)}if(a.ambient){var n=t.getUniformLocation(t.program,"u_Light.ambient");t.uniform3fv(n,a.ambient)}if(a.diffuse){var o=t.getUniformLocation(t.program,"u_Light.diffuse");t.uniform3fv(o,a.diffuse)}if(a.specular){var e=t.getUniformLocation(t.program,"u_Light.specular");t.uniform3fv(e,a.specular)}}},t.prototype.setUniformsMaterials=function(t,a){if(a.material){if(a.material.ambient){var r=t.getUniformLocation(t.program,"u_Material.ambient");t.uniform3fv(r,a.material.ambient)}if(a.material.diffuse){var n=t.getUniformLocation(t.program,"u_Material.diffuse");t.uniform3fv(n,a.material.diffuse)}if(a.material.specular){var o=t.getUniformLocation(t.program,"u_Material.specular");t.uniform3fv(o,a.material.specular)}if(a.material.shine){var e=t.getUniformLocation(t.program,"u_Material.shine");t.uniform1f(e,a.material.shine)}}},t}(),Sphere=function(){function t(t,a,r,n,o){this.radius=a,this.latitudeBands=r,this.longitudeBands=n,this.material=o,this.buildArrays(),this.buildBuffers(t),this.buildTransforms()}return t.prototype.buildArrays=function(){for(var t=[],a=[],r=[],n=[],o=0;o<=this.latitudeBands;++o)for(var e=o*Math.PI/this.latitudeBands,i=Math.sin(e),u=Math.cos(e),l=0;l<=this.longitudeBands;++l){var s=2*l*Math.PI/this.longitudeBands,M=Math.sin(s),c=Math.cos(s),f=c*i,h=u,m=M*i,x=1-l/this.longitudeBands,S=1-o/this.latitudeBands;t.push(this.radius*f),t.push(this.radius*h),t.push(this.radius*m),a.push(f),a.push(h),a.push(m),r.push(x),r.push(S)}for(var o=0;o<this.latitudeBands;++o)for(var l=0;l<this.longitudeBands;++l){var I=o*(this.longitudeBands+1)+l,d=I+this.longitudeBands+1;n.push(I),n.push(d),n.push(I+1),n.push(d),n.push(d+1),n.push(I+1)}this.indicesCount=n.length,this.positions=new Float32Array(t),this.normals=new Float32Array(a),this.textureCoords=new Float32Array(r),this.indices=new Uint16Array(n)},t.prototype.buildBuffers=function(t){this.positionsBuffer=t.createBuffer(),this.normalsBuffer=t.createBuffer(),this.textureCoordsBuffer=t.createBuffer(),this.indicesBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionsBuffer),t.bufferData(t.ARRAY_BUFFER,this.positions,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.normalsBuffer),t.bufferData(t.ARRAY_BUFFER,this.normals,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.textureCoordsBuffer),t.bufferData(t.ARRAY_BUFFER,this.textureCoords,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},t.prototype.buildTransforms=function(){this.modelToWorld=mat4.create(),this.worldToModel=mat4.create(),mat4.invert(this.worldToModel,this.modelToWorld)},t}();